#!/usr/bin/env python3

import sys
import subprocess
import json
from functions import *




#Generating diff for two directories

if( len(sys.argv) < 2 ):
    raise Exception("Please input base directory.")
elif( len(sys.argv) < 3 ):
    raise Exception("Please input directory to be compared with.")


base_dir = sys.argv[1]
comp_dir = sys.argv[2]

file_diff_object = generate_file_diffs( base_dir, comp_dir )

base_dir_dirs = generate_dir_list(base_dir)
comp_dir_dirs = generate_dir_list(comp_dir)

dirs_to_delete = []
dirs_to_build = [] #format:  array of build objects

#list dirs in base dir not in comp dir
for dir in base_dir_dirs:
    if dir not in comp_dir_dirs:
        dirs_to_delete.append(dir)

for dir in dirs_to_delete:
    base_dir_dirs.remove(dir)

#list dirs to build along with build instructions for dirs in comp dir not in base dir
for dir in comp_dir_dirs:
    if dir not in base_dir_dirs:
        build_instructions = dir_build_instructions(f"{comp_dir}/{dir}")
        build_object = {"name": dir, "category": "directory", "content": build_instructions}
        dirs_to_build.append(build_object)

for build_object in dirs_to_build:
    comp_dir_dirs.remove(build_object["name"])


#diffs of dirs that are the same in both dirs


